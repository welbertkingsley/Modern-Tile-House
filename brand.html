<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Brand gallery — tiles by brand">
    <title>Brand Gallery | Modern Tile House</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/styles.css" rel="stylesheet">
    <style>
      .lb-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.85); display: none; z-index: 1050; }
      .lb-container { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; padding: 24px; }
      .lb-img { max-width: 95vw; max-height: 85vh; border-radius: 12px; box-shadow: 0 1rem 2rem rgba(0,0,0,.5); }
      .lb-close, .lb-prev, .lb-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,.9); border: 0; width: 44px; height: 44px; border-radius: 999px; display: grid; place-items: center; cursor: pointer; box-shadow: 0 .5rem 1rem rgba(0,0,0,.2); }
      .lb-close { top: 24px; right: 24px; transform: none; width: 40px; height: 40px; }
      .lb-prev { left: 24px; }
      .lb-next { right: 24px; }
      .lb-counter { position: absolute; bottom: 18px; left: 50%; transform: translateX(-50%); color: #fff; }
      @media (max-width: 576px){ .lb-prev,.lb-next{display:none;} }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-semibold" href="index.html">
      <img src="assets/images/logo-placeholder.svg" alt="Logo" width="36" height="36" class="me-2">
      Modern Tile House
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample" aria-controls="navbarsExample" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarsExample">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="catalogues.html">Products Catalogues</a></li>
        <li class="nav-item"><a class="nav-link" href="brands.html">Brands</a></li>
        <li class="nav-item"><a class="nav-link" href="sanitary.html">Sanitary Ware</a></li>
        <li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
      </ul>
    </div>
  </div>
</nav>

    <main class="py-5">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h1 id="brandTitle" class="h3 mb-0">Brand</h1>
          <a href="brands.html" class="btn btn-outline-secondary btn-sm">← All Brands</a>
        </div>
        <p class="text-muted" id="brandTagline">Tap a tile to preview full-screen. Use keyboard arrows to navigate.</p>
        <div id="gallery" class="row g-3"></div>
      </div>
    </main>
    <footer class="footer mt-auto bg-dark text-light py-4">
  <div class="container small d-flex flex-wrap gap-3 justify-content-between align-items-center">
    <div>
      © <span id="year"></span> Modern Tile House. All rights reserved.
    </div>
    <div class="opacity-75">
      Floor • Wall • Parking • Step Tiles • Sanitary Ware • Bathroom Fittings
    </div>
  </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function getParams(){ const p = new URLSearchParams(window.location.search); return Object.fromEntries(p.entries()); }
      async function loadBrand(){ 
        const params = getParams();
        const res = await fetch('assets/data/brands.json');
        const data = await res.json();
        let entry = null;
        if (params.brand && data[params.brand]) { entry = data[params.brand]; entry.name = params.brand; }
        if (!entry && params.slug) { for (const [name, v] of Object.entries(data)) { if (v.slug === params.slug) { entry = v; entry.name = name; break; } } }
        if (!entry) { document.getElementById('brandTitle').textContent = 'Brand not found'; document.getElementById('brandTagline').textContent = 'Please go back and choose a brand.'; return; }
        document.getElementById('brandTitle').textContent = entry.name;
        const g = document.getElementById('gallery');
        entry.images.forEach(function(src, i){ 
          const col = document.createElement('div'); col.className = 'col-6 col-md-4 col-lg-3';
          col.innerHTML = '\
            <div class="card card-hover h-100">\
              <img src="' + src + '" class="card-img-top cursor-zoom" alt="' + entry.name + ' tile" data-index="' + i + '">\
              <div class="card-body py-2"><div class="small text-muted text-truncate">' + entry.name + ' Tile</div></div>\
            </div>';
          g.appendChild(col);
        });
        initLightbox(entry.images);
      }
      function initLightbox(images){ 
        const backdrop = document.createElement('div'); backdrop.className='lb-backdrop'; backdrop.innerHTML = '\
          <div class="lb-container">\
            <img class="lb-img" id="lbImg" src="" alt="Tile preview">\
            <button class="lb-prev" id="lbPrev" aria-label="Previous">‹</button>\
            <button class="lb-next" id="lbNext" aria-label="Next">›</button>\
            <button class="lb-close" id="lbClose" aria-label="Close">✕</button>\
            <div class="lb-counter" id="lbCounter"></div>\
          </div>';
        document.body.appendChild(backdrop);
        let index = 0;
        function show(i){ index = (i + images.length) % images.length; document.getElementById('lbImg').src = images[index]; document.getElementById('lbCounter').textContent = (index+1) + ' / ' + images.length; backdrop.style.display='block'; }
        function hide(){ backdrop.style.display='none'; }
        document.getElementById('gallery').addEventListener('click', function(e){ const img = e.target.closest('img[data-index]'); if (!img) return; show(parseInt(img.getAttribute('data-index'),10)); });
        document.getElementById('lbPrev').addEventListener('click', function(){ show(index-1); });
        document.getElementById('lbNext').addEventListener('click', function(){ show(index+1); });
        document.getElementById('lbClose').addEventListener('click', hide);
        backdrop.addEventListener('click', function(e){ if (e.target === backdrop) hide(); });
        document.addEventListener('keydown', function(e){ if (backdrop.style.display!=='block') return; if (e.key==='Escape') hide(); if (e.key==='ArrowRight') show(index+1); if (e.key==='ArrowLeft') show(index-1); });
      }
      document.addEventListener('DOMContentLoaded', loadBrand);
    </script>
  </body>
</html>
